% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/ipolate_stata.R
\name{ipolate_stata}
\alias{ipolate_stata}
\title{Stata-like linear interpolation with optional tail extrapolation}
\usage{
ipolate_stata(x, y, epolate = FALSE)
}
\arguments{
\item{x}{Numeric vector used as the x-axis (e.g., year). Can be unsorted.}

\item{y}{Numeric vector (same length as \code{x}) to interpolate.}

\item{epolate}{Logical; if \code{TRUE}, apply linear tail extrapolation.}
}
\value{
A numeric vector the same length as \code{y}. Observed \code{y} are preserved;
only NAs are filled (and only if there are â‰¥ 2 non-missing points).
}
\description{
Fills missing values of \code{y} by linear interpolation over \code{x}, preserving
observed \code{y}. If \code{epolate = TRUE}, linearly extrapolates beyond the first
and last observed \code{x} using end slopes (mirrors Stata's \verb{ipolate, epolate}).
}
\examples{
## Example 1: Simple interior interpolation
x <- 2000:2005
y <- c(10, NA, 30, NA, NA, 60)
ipolate_stata(x, y)
# [1] 10 20 30 40 50 60

## Example 2: Missing at both ends
y2 <- c(NA, 20, NA, 40, NA, NA)
ipolate_stata(x, y2)
# [1] NA 20 30 40 NA NA
ipolate_stata(x, y2, epolate = TRUE)
# [1] 10 20 30 40 50 60

## Example 3: Only one non-missing value
y3 <- c(NA, NA, 50, NA, NA)
ipolate_stata(x[1:5], y3)
# [1] NA NA 50 NA NA  (returns original, no interpolation)

## Example 4: Unsorted x
x4 <- c(2003, 2001, 2002, 2005, 2004)
y4 <- c(30,   10,   NA,   60,   NA)
ipolate_stata(x4, y4)
# [1] 30 10 20 60 45  (restores original order after filling)

}
